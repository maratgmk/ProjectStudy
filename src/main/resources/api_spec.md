* [Постановка задачи](#Постановка-задачи)
* [Общие положения](#Общие-положения)
* [Типы данных](#Типы-данных)
  * [CarOwner](#CarOwner)
  * [Car](#Car)
  * [StateNumber](#StateNumber)
  * [Fine](#Fine)
  * [PenaltyEvent](#PenaltyEvent)
  * [Error](#Error)
* [Методы](#Методы)
  * [GET /PenaltyEvents](#get-penaltyevents)
  * [GET /Statistics/{top}](#get-statisticstop)
* [Список ошибок](#Список-ошибок)

## Постановка задачи
Сервлет должен выполнять:
1. параметризованный поиск штрафов в базе данных по Ф.И.О. владельца или госномеру автомобиля с выводом следующей информации:
- госномер;
- марка машины;
- модель машины;
- владелец;
- тип начисленного штрафа;
2. подготовку отчета о 5 самых частых штрафах по данным о владельце и автомобиле.

Одному владельцу может принадлежать несколько автомобилей. 
Справочник типов штрафов и пошлины по его оплате размещается в отдельной таблице-справочнике, не требующей заполнения.

## Общие положения
Передача параметров в методы `GET` осуществляется с использованием типа данных `application/json` в кодировке UTF-8.

Результаты выполнения запросов передаются с использованием типа данных `application/json` в кодировке UTF-8.

Ошибки возвращаются с использованием типа данных [Error](#error) и семантически соответствующим http-кодам.

## Типы данных
### CarOwner
Сущность, содержащая информацию о владельце.

| Поле | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| id | long | да | Уникальный идентификатор владельца |
| firstName | String | да | Имя владельца |
| middleName | String | да | Отчество владельца |
| lastName | String | да | Фамилия владельца |

### Car
Сущность, содержащая информацию о машине.

| Поле | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| id | long | да | Уникальный идентификатор машины |
| make | String | да | Марка машины |
| model | String | да | Модель машины |
| StateNumberID | long | да | Идентификатор госномера машины |
| CarOwnerID | long | да | Идентификатор владельца машины |

### StateNumber
Сущность, содержащая информацию о госномере.

| Поле | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| id | String | да | Уникальный идентификатор госномера |
| country | String | да | Страна регистрации машины (латиница) |
| regionCode | long | да | Код региона регистрации машины |
| series | String | да | Серия госномера (3 буквы кириллицей) |
| number | long | да | Номер регистрации в серии |

### Fine
Сущность, содержащая информацию о типе штрафа и сумме начисления за него.

| Поле | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| id | long | да | Уникальный идентификатор штрафа |
| type | String | да | Тип штрафа |
| charge | BigDecimal | да | Сумма начислений |

### PenaltyEvent
Сущность, содержащая информацию о событии начисления штрафа.

| Поле | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| id | long | да | Уникальный идентификатор события |
| eventDate | LocalDateTime | да | Время начисления штрафа |
| fineID | long | да | Идентификатор штрафа из базы |
| carID | long | да | Идентификатор машины, которой присвоен штраф |

### Statistics
Сущность, содержащая запись статистики по типам штрафов.

| Поле | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| id | long | да | Уникальный идентификатор события |
| fineID | long | да | Идентификатор штрафа из базы |
| topPlace | long | да | Место top штрафа по частоте упоминания в журнале выписанных штрафов |
| occurrencesNumber | long | да | Количество упоминаний о данном типе штрафа в базе |

### Error
Сущность, содержащая информацию об ошибке.

| Поле | Тип данных | Обязательное | Комментарий |
| --- | --- | --- | --- |
| code | String | да | Код ошибки. |
| message | String | нет | Сообщение. |

## Методы
### GET /penaltyevents
Возвращает список событий из БД, удовлетворяющими условиям фильтра.

#### Ответ
[PenaltyEvent](#PenaltyEvent) 

#### Ошибки
| Код  | Комментарий |
| --- | --- |
| 1 | Внутренняя ошибка. |
| 3 | Сервис недоступен. |
| 4 | Событие не найдено. |

### GET /statistics/{top}
Возвращает топ первых по популярности штрафов базы данных.
#### Ответ
[Statistics](#Statistics) 

## Список ошибок
| Код  | Комментарий | HTTP-код |
| --- | --- | --- |
| 1 | Внутренняя ошибка. | 500 Internal Server Error|
| 2 | Некорректные значения параметров. | 400 Bad Request |
| 3 | Сервис недоступен. | 503 Service Unavailable |
| 4 | Объект не найден. | 404 Not Found |
